From 0d25205f023b33ae3c0986468ea7d167afe53cbf Mon Sep 17 00:00:00 2001
From: Chris Cain <cjcain@us.ibm.com>
Date: Mon, 22 Feb 2016 12:34:40 -0600
Subject: [PATCH] Add Turbo Allowed IPMI sensor

RTC: 146126
---
 habanero.xml | 71 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 71 insertions(+)

diff --git a/habanero.xml b/habanero.xml
index 5a0a6d3..50ec4e7 100644
--- a/habanero.xml
+++ b/habanero.xml
@@ -1474,6 +1474,17 @@
 	</property>
 </globalSetting>
 <globalSetting>
+	<id>/sys-0/turbo_allowed_sensor</id>
+	<property>
+	<id>INSTANCE_ID</id>
+	<value>turbo_allowed_sensor</value>
+	</property>
+	<property>
+	<id>IPMI_SENSOR_ID</id>
+	<value>0xB8</value>
+	</property>
+</globalSetting>
+<globalSetting>
 	<id>/sys-0/system_event_sensor</id>
 	<property>
 	<id>IPMI_SENSOR_ID</id>
@@ -4770,6 +4781,7 @@
 	<hidden_child_id>power_limit_sensor</hidden_child_id>
 	<hidden_child_id>ps_derating_sensor</hidden_child_id>
 	<hidden_child_id>dimm_freq_sensor</hidden_child_id>
+	<hidden_child_id>turbo_allowed_sensor</hidden_child_id>
 	<attribute>
 		<id>ALL_MCS_IN_INTERLEAVING_GROUP</id>
 		<default>1</default>
@@ -17465,6 +17477,65 @@
 	</attribute>
 </targetInstance>
 <targetInstance>
+	<id>turbo_allowed_sensor</id>
+	<type>unit-ipmi-sensor</type>
+	<library_target>true</library_target>
+	<instance_name>turbo_allowed_sensor</instance_name>
+	<position>-1</position>
+	<attribute>
+		<id>BUS_TYPE</id>
+		<default>NA</default>
+	</attribute>
+	<attribute>
+		<id>CHIP_UNIT</id>
+		<default>0</default>
+	</attribute>
+	<attribute>
+		<id>CLASS</id>
+		<default>UNIT</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_ENTITY_ID</id>
+		<default>0x03</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_ID</id>
+		<default></default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_NAME_SUFFIX</id>
+		<default>Turbo_Allowed</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_OFFSETS</id>
+		<default>0x00,0x01</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_READING_TYPE</id>
+		<default>0x03</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_TYPE</id>
+		<default>0xCB</default>
+	</attribute>
+	<attribute>
+		<id>MODEL</id>
+		<default></default>
+	</attribute>
+	<attribute>
+		<id>MRW_TYPE</id>
+		<default>IPMI_SENSOR</default>
+	</attribute>
+	<attribute>
+		<id>RESOURCE_IS_CRITICAL</id>
+		<default>0</default>
+	</attribute>
+	<attribute>
+		<id>TYPE</id>
+		<default>NA</default>
+	</attribute>
+</targetInstance>
+<targetInstance>
 	<id>pcieslot-0</id>
 	<type>slot-pcieslot-generic</type>
 	<library_target>false</library_target>
