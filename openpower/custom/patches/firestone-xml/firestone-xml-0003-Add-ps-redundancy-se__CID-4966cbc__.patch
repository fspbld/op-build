From 0b4fc4fe8390c7a90c401d0ff367a9bef3b65fb4 Mon Sep 17 00:00:00 2001
From: "Richard J. Knight" <rjknight@us.ibm.com>
Date: Wed, 4 Nov 2015 11:00:02 -0600
Subject: [PATCH] Add ps redundancy sensor to firestone.xml

---
 firestone.xml | 71 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 71 insertions(+)

diff --git a/firestone.xml b/firestone.xml
index 1886102..ded623e 100644
--- a/firestone.xml
+++ b/firestone.xml
@@ -1380,6 +1380,17 @@
 	</property>
 </globalSetting>
 <globalSetting>
+	<id>/sys-0/ps_redundancy_state_sensor</id>
+	<property>
+	<id>INSTANCE_ID</id>
+	<value>ps_redundancy_state_sensor</value>
+	</property>
+	<property>
+	<id>IPMI_SENSOR_ID</id>
+	<value>0xD8</value>
+	</property>
+</globalSetting>
+<globalSetting>
 	<id>/sys-0/system_event_sensor</id>
 	<property>
 	<id>IPMI_SENSOR_ID</id>
@@ -5139,6 +5150,7 @@
 	<hidden_child_id>power_limit_sensor</hidden_child_id>
 	<hidden_child_id>ps_derating_sensor</hidden_child_id>
 	<hidden_child_id>dimm_freq_sensor</hidden_child_id>
+	<hidden_child_id>ps_redundancy_state_sensor</hidden_child_id>
 	<attribute>
 		<id>ALL_MCS_IN_INTERLEAVING_GROUP</id>
 		<default>1</default>
@@ -16571,6 +16583,65 @@
 	</attribute>
 </targetInstance>
 <targetInstance>
+	<id>ps_redundancy_state_sensor</id>
+	<type>unit-ipmi-sensor</type>
+	<library_target>true</library_target>
+	<instance_name>ps_redundancy_state_sensor</instance_name>
+	<position>-1</position>
+	<attribute>
+		<id>BUS_TYPE</id>
+		<default>NA</default>
+	</attribute>
+	<attribute>
+		<id>CHIP_UNIT</id>
+		<default>0</default>
+	</attribute>
+	<attribute>
+		<id>CLASS</id>
+		<default>UNIT</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_ENTITY_ID</id>
+		<default>0x22</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_ID</id>
+		<default></default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_NAME_SUFFIX</id>
+		<default>Ps_Redundancy</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_OFFSETS</id>
+		<default>0x00,0x01</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_READING_TYPE</id>
+		<default>0x03</default>
+	</attribute>
+	<attribute>
+		<id>IPMI_SENSOR_TYPE</id>
+		<default>0xCA</default>
+	</attribute>
+	<attribute>
+		<id>MODEL</id>
+		<default></default>
+	</attribute>
+	<attribute>
+		<id>MRW_TYPE</id>
+		<default>IPMI_SENSOR</default>
+	</attribute>
+	<attribute>
+		<id>RESOURCE_IS_CRITICAL</id>
+		<default>0</default>
+	</attribute>
+	<attribute>
+		<id>TYPE</id>
+		<default>NA</default>
+	</attribute>
+</targetInstance>
+<targetInstance>
 	<id>vddr_gpio-0</id>
 	<type>chip-gpioexp-generic</type>
 	<library_target>false</library_target>
